<div class="chat">
    <div class="chat__header">
        <ui-button
            class="header__back"
            [icon]="'fa-solid fa-arrow-left'"
            [size]="'large'"
            [type]="'primary-line'"
            (click)="deselectChatUser()"
        ></ui-button>

        <div class="chat__person">
            <span class="person__image-wrapper">
                <img src="/user.svg" alt="User Avatar" class="person__image" />
            </span>

            <span class="person__name">{{ chatUserName() }}</span>
        </div>
    </div>

    <div class="chat__body">
        <div
            #messagesContainer
            class="body__messages"
            (scroll)="onChatScroll()"
        >
            @for(message of chat(); track message.id) {
            <div class="chat__message">
                <span class="message__image-wrapper">
                    <img
                        src="/user.svg"
                        alt="User Avatar"
                        class="message__image"
                    />
                </span>

                <div
                    class="message__content"
                    [ngClass]="{ 'message__content_own': isOwnMessage(message) }"
                >
                    {{ message.content }}
                </div>
            </div>
            }
        </div>
    </div>

    <div class="chat__send">
        <ui-input
            class="send__input"
            [placeholder]="'Type your message...'"
            [(value)]="newMessageContent"
            [size]="'small'"
            [theme]="'primary'"
            [isFullWidth]="true"
            (keydown.enter)="sendMessage()"
        ></ui-input>

        <ui-button
            [label]="'Send'"
            [size]="'small'"
            [type]="'primary'"
            (click)="sendMessage()"
        ></ui-button>
    </div>
</div>
