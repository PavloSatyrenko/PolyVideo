<section class="conference__main">
    <div class="conference__view">
        <div #participantsWrapper class="conference__participants">
            @for(participant of participants(); track participant.id) {
            <app-conference-participant
                [participant]="participant"
            ></app-conference-participant>
            }
        </div>

        @if (isSidebarOpened()) {
        <aside class="conference__sidebar">
            @if (isParticipantsSidebarOpened()) {
            <app-conference-participants-sidebar
                [participants]="participants()"
            ></app-conference-participants-sidebar>
            } @if (isChatSidebarOpened()) {
            <app-conference-chat-sidebar
                [messages]="messages()"
            ></app-conference-chat-sidebar>
            } @if (isOptionsSidebarOpened()) {
            <app-conference-options-sidebar
                [meeting]="meeting()"
            ></app-conference-options-sidebar>
            }
        </aside>
        }
    </div>

    <div class="conference__controls">
        @for(item of controlsItems(); track item.type) {
        <app-conference-controls-item
            [item]="item"
            (click)="handleControlItemClick($event)"
        ></app-conference-controls-item>
        }
    </div>
</section>

@if (isRequestedEnableVideoByOwner()) {
<div class="popup">
    <div class="popup__content" #popup>
        <ui-title
            class="popup__text"
            [title]="'The meeting owner has requested you to enable your video.'"
            [size]="'small'"
        ></ui-title>

        <div class="popup__actions">
            <ui-button
                class="popup__button"
                [icon]="'fa-solid fa-video'"
                [label]="'Enable Video'"
                [size]="'small'"
                [type]="'primary'"
                [isFullWidth]="true"
                (click)="enableVideo()"
            >
            </ui-button>

            <ui-button
                class="popup__button"
                [icon]="'fa-solid fa-ban'"
                [label]="'Decline'"
                [size]="'small'"
                [type]="'primary-line'"
                [isFullWidth]="true"
                (click)="declineEnableVideo()"
            >
            </ui-button>
        </div>
    </div>
</div>
} @if (isRequestedUnmuteByOwner()) {
<div class="popup">
    <div class="popup__content" #popup>
        <ui-title
            class="popup__text"
            [title]="'The meeting owner has requested you to unmute your microphone.'"
            [size]="'small'"
        ></ui-title>

        <div class="popup__actions">
            <ui-button
                class="popup__button"
                [icon]="'fa-solid fa-microphone'"
                [label]="'Unmute'"
                [size]="'small'"
                [type]="'primary'"
                [isFullWidth]="true"
                (click)="unmute()"
            >
            </ui-button>

            <ui-button
                class="popup__button"
                [icon]="'fa-solid fa-ban'"
                [label]="'Decline'"
                [size]="'small'"
                [type]="'primary-line'"
                [isFullWidth]="true"
                (click)="declineUnmute()"
            >
            </ui-button>
        </div>
    </div>
</div>
} @if (isRequestToJoinPopupVisible()) {
<div class="popup">
    <div class="popup__content" #popup>
        <ui-title
            class="popup__text"
            [title]="firstRequestToJoin().name + ' is requesting to join the meeting.'"
            [size]="'small'"
        ></ui-title>

        <div class="popup__actions">
            <ui-button
                class="popup__button"
                [icon]="'fa-solid fa-check'"
                [label]="'Allow to Join'"
                [size]="'small'"
                [type]="'primary'"
                [isFullWidth]="true"
                (click)="approveRequestToJoin()"
            >
            </ui-button>

            <ui-button
                class="popup__button"
                [icon]="'fa-solid fa-ban'"
                [label]="'Decline'"
                [size]="'small'"
                [type]="'primary-line'"
                [isFullWidth]="true"
                (click)="declineRequestToJoin()"
            >
            </ui-button>
        </div>
    </div>
</div>
}
